define(["jquery"],function(e){(function(){e.fn.scrollLoading=function(t){var n={attr:"data-url",container:e(window),callback:e.noop},r=e.extend({},n,t||{});r.cache=[],e(this).each(function(){var t=this.nodeName.toLowerCase(),n=e(this).attr(r.attr),i={obj:e(this),tag:t,url:n};r.cache.push(i)});var i=function(t){e.isFunction(r.callback)&&r.callback.call(t.get(0))},s=function(){var t=r.container.height();e(window).get(0)===window?contop=e(window).scrollTop():contop=r.container.offset().top,e.each(r.cache,function(e,n){var r=n.obj,s=n.tag,o=n.url,u,a;if(r){u=r.offset().top-contop,u+r.height();if(u>=0&&u<t||a>0&&a<=t)o?s==="img"?i(r.attr("src",o)):r.load(o,{},function(){i(r)}):i(r),n.obj=null}})};s(),r.container.bind("scroll",s)}})()});